import{a as d}from"./chunk.OAQCUA7X.js";var a=class extends Event{constructor(e){super("formdata");this.formData=e}},l=class extends FormData{constructor(e){var o=(...args)=>{super(...args)};e?(o(e),this.form=e,e.dispatchEvent(new a(this))):o()}append(e,t){if(!this.form)return super.append(e,t);let n=this.form.elements[e];if(n||(n=document.createElement("input"),n.type="hidden",n.name=e,this.form.appendChild(n)),this.has(e)){let r=this.getAll(e),m=r.indexOf(n.value);m!==-1&&r.splice(m,1),r.push(t),this.set(e,r)}else super.append(e,t);n.value=t}};function p(){let i=document.createElement("form"),o=!1;return document.body.append(i),i.addEventListener("submit",e=>{new FormData(e.target),e.preventDefault()}),i.addEventListener("formdata",()=>o=!0),i.dispatchEvent(new Event("submit",{cancelable:!0})),i.remove(),o}function h(){!window.FormData||p()||(window.FormData=l,window.addEventListener("submit",i=>{i.defaultPrevented||new FormData(i.target)}))}document.readyState==="complete"?h():window.addEventListener("DOMContentLoaded",()=>h());var s=new WeakMap,u=class{constructor(o,e){(this.host=o).addController(this),this.options=d({form:t=>t.closest("form"),name:t=>t.name,value:t=>t.value,defaultValue:t=>t.defaultValue,disabled:t=>t.disabled,reportValidity:t=>typeof t.reportValidity=="function"?t.reportValidity():!0,setValue:(t,n)=>{t.value=n}},e),this.handleFormData=this.handleFormData.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleFormReset=this.handleFormReset.bind(this),this.reportFormValidity=this.reportFormValidity.bind(this)}hostConnected(){this.form=this.options.form(this.host),this.form&&(this.form.addEventListener("formdata",this.handleFormData),this.form.addEventListener("submit",this.handleFormSubmit),this.form.addEventListener("reset",this.handleFormReset),s.has(this.form)||(s.set(this.form,this.form.reportValidity),this.form.reportValidity=()=>this.reportFormValidity()))}hostDisconnected(){this.form&&(this.form.removeEventListener("formdata",this.handleFormData),this.form.removeEventListener("submit",this.handleFormSubmit),this.form.removeEventListener("reset",this.handleFormReset),s.has(this.form)&&(this.form.reportValidity=s.get(this.form),s.delete(this.form)),this.form=void 0)}handleFormData(o){let e=this.options.disabled(this.host),t=this.options.name(this.host),n=this.options.value(this.host);!e&&typeof t=="string"&&typeof n!="undefined"&&(Array.isArray(n)?n.forEach(r=>{o.formData.append(t,r.toString())}):o.formData.append(t,n.toString()))}handleFormSubmit(o){let e=this.options.disabled(this.host),t=this.options.reportValidity;this.form&&!this.form.noValidate&&!e&&!t(this.host)&&(o.preventDefault(),o.stopImmediatePropagation())}handleFormReset(){this.options.setValue(this.host,this.options.defaultValue(this.host))}reportFormValidity(){if(this.form&&!this.form.noValidate){let o=this.form.querySelectorAll("*");for(let e of o)if(typeof e.reportValidity=="function"&&!e.reportValidity())return!1}return!0}doAction(o,e){if(this.form){let t=document.createElement("button");t.type=o,t.style.position="absolute",t.style.width="0",t.style.height="0",t.style.clipPath="inset(50%)",t.style.overflow="hidden",t.style.whiteSpace="nowrap",e&&["formaction","formmethod","formnovalidate","formtarget"].forEach(n=>{e.hasAttribute(n)&&t.setAttribute(n,e.getAttribute(n))}),this.form.append(t),t.click(),t.remove()}}reset(o){this.doAction("reset",o)}submit(o){this.doAction("submit",o)}};export{u as a};
