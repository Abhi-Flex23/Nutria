import{a as f}from"./chunk.SZP2MF3F.js";import{b as d}from"./chunk.RHW2XED2.js";import{a as o}from"./chunk.RLRUXUC7.js";import{a as u}from"./chunk.V4OMSSO6.js";import{a as c,d as r}from"./chunk.GVR6SJVE.js";import{c as a,h as m}from"./chunk.7EIHAL55.js";import{g as n}from"./chunk.OAQCUA7X.js";var i=class extends m{constructor(){super(...arguments);this.typeToSelectString=""}firstUpdated(){this.setAttribute("role","menu")}getAllItems(e={includeDisabled:!0}){return[...this.defaultSlot.assignedElements({flatten:!0})].filter(t=>!(t.getAttribute("role")!=="menuitem"||!e.includeDisabled&&t.disabled))}getCurrentItem(){return this.getAllItems({includeDisabled:!1}).find(e=>e.getAttribute("tabindex")==="0")}setCurrentItem(e){let t=this.getAllItems({includeDisabled:!1}),l=e.disabled?t[0]:e;t.forEach(s=>{s.setAttribute("tabindex",s===l?"0":"-1")})}typeToSelect(e){var l;let t=this.getAllItems({includeDisabled:!1});clearTimeout(this.typeToSelectTimeout),this.typeToSelectTimeout=window.setTimeout(()=>this.typeToSelectString="",1e3),e.key==="Backspace"?e.metaKey||e.ctrlKey?this.typeToSelectString="":this.typeToSelectString=this.typeToSelectString.slice(0,-1):this.typeToSelectString+=e.key.toLowerCase(),o||t.forEach(s=>s.classList.remove("sl-focus-invisible"));for(let s of t){let h=(l=s.shadowRoot)==null?void 0:l.querySelector("slot:not([name])");if(d(h).toLowerCase().trim().startsWith(this.typeToSelectString)){this.setCurrentItem(s),s.focus();break}}}handleClick(e){let l=e.target.closest("sl-menu-item");(l==null?void 0:l.disabled)===!1&&u(this,"sl-select",{detail:{item:l}})}handleKeyUp(){o||this.getAllItems().forEach(t=>{t.classList.remove("sl-focus-invisible")})}handleKeyDown(e){if(e.key==="Enter"){let t=this.getCurrentItem();e.preventDefault(),t==null||t.click()}if(e.key===" "&&e.preventDefault(),["ArrowDown","ArrowUp","Home","End"].includes(e.key)){let t=this.getAllItems({includeDisabled:!1}),l=this.getCurrentItem(),s=l?t.indexOf(l):0;if(t.length>0){e.preventDefault(),e.key==="ArrowDown"?s++:e.key==="ArrowUp"?s--:e.key==="Home"?s=0:e.key==="End"&&(s=t.length-1),s<0&&(s=t.length-1),s>t.length-1&&(s=0),this.setCurrentItem(t[s]),t[s].focus();return}}this.typeToSelect(e)}handleMouseDown(e){let t=e.target;t.getAttribute("role")==="menuitem"&&(this.setCurrentItem(t),o||t.classList.add("sl-focus-invisible"))}handleSlotChange(){let e=this.getAllItems({includeDisabled:!1});e.length>0&&this.setCurrentItem(e[0])}render(){return a`
      <div
        part="base"
        class="menu"
        @click=${this.handleClick}
        @keydown=${this.handleKeyDown}
        @keyup=${this.handleKeyUp}
        @mousedown=${this.handleMouseDown}
      >
        <slot @slotchange=${this.handleSlotChange}></slot>
      </div>
    `}};i.styles=f,n([r(".menu")],i.prototype,"menu",2),n([r("slot")],i.prototype,"defaultSlot",2),i=n([c("sl-menu")],i);export{i as a};
