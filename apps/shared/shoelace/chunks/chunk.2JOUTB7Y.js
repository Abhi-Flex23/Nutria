var l=new Set,v=new MutationObserver(m),s=new Map,d=document.documentElement.dir||"ltr",g=document.documentElement.lang||navigator.language,o;v.observe(document.documentElement,{attributes:!0,attributeFilter:["dir","lang"]});function w(...i){i.map(t=>{let e=t.$code.toLowerCase();s.has(e)?s.set(e,Object.assign(Object.assign({},s.get(e)),t)):s.set(e,t),o||(o=t)}),m()}function m(){d=document.documentElement.dir||"ltr",g=document.documentElement.lang||navigator.language,[...l.keys()].map(i=>{typeof i.requestUpdate=="function"&&i.requestUpdate()})}var u=class{constructor(t){this.host=t,this.host.addController(this)}hostConnected(){l.add(this.host)}hostDisconnected(){l.delete(this.host)}dir(){return`${this.host.dir||d}`.toLowerCase()}lang(){return`${this.host.lang||g}`.toLowerCase()}getTranslationData(t){var e,a;let n=new Intl.Locale(t),r=n==null?void 0:n.language.toLowerCase(),c=(a=(e=n==null?void 0:n.region)===null||e===void 0?void 0:e.toLowerCase())!==null&&a!==void 0?a:"",h=s.get(`${r}-${c}`),f=s.get(r);return{locale:n,language:r,region:c,primary:h,secondary:f}}exists(t,e){var a;let{primary:n,secondary:r}=this.getTranslationData((a=e.lang)!==null&&a!==void 0?a:this.lang());return e=Object.assign({includeFallback:!1},e),!!(n&&n[t]||r&&r[t]||e.includeFallback&&o&&o[t])}term(t,...e){let{primary:a,secondary:n}=this.getTranslationData(this.lang()),r;if(a&&a[t])r=a[t];else if(n&&n[t])r=n[t];else if(o&&o[t])r=o[t];else return console.error(`No translation found for: ${String(t)}`),String(t);return typeof r=="function"?r(...e):r}date(t,e){return t=new Date(t),new Intl.DateTimeFormat(this.lang(),e).format(t)}number(t,e){return t=Number(t),isNaN(t)?"":new Intl.NumberFormat(this.lang(),e).format(t)}relativeTime(t,e,a){return new Intl.RelativeTimeFormat(this.lang(),a).format(t,e)}};export{w as a,u as b};
