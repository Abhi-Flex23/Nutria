import{a as l}from"./chunk.OAQCUA7X.js";var r=class extends Event{constructor(t){super("formdata");this.formData=t}},a=class extends FormData{constructor(t){super(t);this.form=t,t.dispatchEvent(new r(this))}append(t,e){let o=this.form.elements[t];if(o||(o=document.createElement("input"),o.type="hidden",o.name=t,this.form.appendChild(o)),this.has(t)){let s=this.getAll(t),m=s.indexOf(o.value);m!==-1&&s.splice(m,1),s.push(e),this.set(t,s)}else super.append(t,e);o.value=e}};function p(){let i=document.createElement("form"),n=!1;return document.body.append(i),i.addEventListener("submit",t=>{new FormData(t.target),t.preventDefault()}),i.addEventListener("formdata",()=>n=!0),i.dispatchEvent(new Event("submit",{cancelable:!0})),i.remove(),n}function d(){!window.FormData||p()||(window.FormData=a,window.addEventListener("submit",i=>{i.defaultPrevented||new FormData(i.target)}))}document.readyState==="complete"?d():window.addEventListener("DOMContentLoaded",()=>d());var h=class{constructor(n,t){(this.host=n).addController(this),this.options=l({form:e=>e.closest("form"),name:e=>e.name,value:e=>e.value,disabled:e=>e.disabled,reportValidity:e=>typeof e.reportValidity=="function"?e.reportValidity():!0},t),this.handleFormData=this.handleFormData.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this)}hostConnected(){this.form=this.options.form(this.host),this.form&&(this.form.addEventListener("formdata",this.handleFormData),this.form.addEventListener("submit",this.handleFormSubmit))}hostDisconnected(){this.form&&(this.form.removeEventListener("formdata",this.handleFormData),this.form.removeEventListener("submit",this.handleFormSubmit),this.form=void 0)}handleFormData(n){let t=this.options.disabled(this.host),e=this.options.name(this.host),o=this.options.value(this.host);!t&&typeof e=="string"&&typeof o!="undefined"&&(Array.isArray(o)?o.forEach(s=>{n.formData.append(e,s.toString())}):n.formData.append(e,o.toString()))}handleFormSubmit(n){let t=this.options.disabled(this.host),e=this.options.reportValidity;this.form&&!this.form.noValidate&&!t&&!e(this.host)&&(n.preventDefault(),n.stopImmediatePropagation())}submit(n){if(this.form){let t=document.createElement("button");t.type="submit",t.style.position="absolute",t.style.width="0",t.style.height="0",t.style.clipPath="inset(50%)",t.style.overflow="hidden",t.style.whiteSpace="nowrap",n&&["formaction","formmethod","formnovalidate","formtarget"].forEach(e=>{n.hasAttribute(e)&&t.setAttribute(e,n.getAttribute(e))}),this.form.append(t),t.click(),t.remove()}}};export{h as a};
