import{a as d}from"./chunk.OAQCUA7X.js";var a=class extends Event{constructor(t){super("formdata");this.formData=t}},m=class extends FormData{constructor(t){var o=(...args)=>{super(...args)};t?(o(t),this.form=t,t.dispatchEvent(new a(this))):o()}append(t,e){if(!this.form)return super.append(t,e);let n=this.form.elements[t];if(n||(n=document.createElement("input"),n.type="hidden",n.name=t,this.form.appendChild(n)),this.has(t)){let r=this.getAll(t),l=r.indexOf(n.value);l!==-1&&r.splice(l,1),r.push(e),this.set(t,r)}else super.append(t,e);n.value=e}};function u(){let i=document.createElement("form"),o=!1;return document.body.append(i),i.addEventListener("submit",t=>{new FormData(t.target),t.preventDefault()}),i.addEventListener("formdata",()=>o=!0),i.dispatchEvent(new Event("submit",{cancelable:!0})),i.remove(),o}function h(){!window.FormData||u()||(window.FormData=m,window.addEventListener("submit",i=>{i.defaultPrevented||new FormData(i.target)}))}document.readyState==="complete"?h():window.addEventListener("DOMContentLoaded",()=>h());var s=new WeakMap,p=class{constructor(o,t){(this.host=o).addController(this),this.options=d({form:e=>e.closest("form"),name:e=>e.name,value:e=>e.value,disabled:e=>e.disabled,reportValidity:e=>typeof e.reportValidity=="function"?e.reportValidity():!0},t),this.handleFormData=this.handleFormData.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.reportFormValidity=this.reportFormValidity.bind(this)}hostConnected(){this.form=this.options.form(this.host),this.form&&(this.form.addEventListener("formdata",this.handleFormData),this.form.addEventListener("submit",this.handleFormSubmit),s.has(this.form)||(s.set(this.form,this.form.reportValidity),this.form.reportValidity=()=>this.reportFormValidity()))}hostDisconnected(){this.form&&(this.form.removeEventListener("formdata",this.handleFormData),this.form.removeEventListener("submit",this.handleFormSubmit),s.has(this.form)&&(this.form.reportValidity=s.get(this.form),s.delete(this.form)),this.form=void 0)}handleFormData(o){let t=this.options.disabled(this.host),e=this.options.name(this.host),n=this.options.value(this.host);!t&&typeof e=="string"&&typeof n!="undefined"&&(Array.isArray(n)?n.forEach(r=>{o.formData.append(e,r.toString())}):o.formData.append(e,n.toString()))}handleFormSubmit(o){let t=this.options.disabled(this.host),e=this.options.reportValidity;this.form&&!this.form.noValidate&&!t&&!e(this.host)&&(o.preventDefault(),o.stopImmediatePropagation())}reportFormValidity(){if(this.form&&!this.form.noValidate){let o=this.form.querySelectorAll("*");for(let t of o)if(typeof t.reportValidity=="function"&&!t.reportValidity())return!1}return!0}submit(o){if(this.form){let t=document.createElement("button");t.type="submit",t.style.position="absolute",t.style.width="0",t.style.height="0",t.style.clipPath="inset(50%)",t.style.overflow="hidden",t.style.whiteSpace="nowrap",o&&["formaction","formmethod","formnovalidate","formtarget"].forEach(e=>{o.hasAttribute(e)&&t.setAttribute(e,o.getAttribute(e))}),this.form.append(t),t.click(),t.remove()}}};export{p as a};
